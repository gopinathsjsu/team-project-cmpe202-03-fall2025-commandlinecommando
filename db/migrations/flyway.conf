# =============================================================================
# Flyway Configuration for Campus Marketplace
# CMPE 202 Project: Cloud-Ready Database Migrations
# =============================================================================

# Flyway Configuration
flyway.url=jdbc:postgresql://localhost:5432/campus_marketplace
flyway.user=${DB_USERNAME}
flyway.password=${DB_PASSWORD}
flyway.schemas=public
flyway.locations=filesystem:./migrations
flyway.encoding=UTF-8

# Baseline Configuration
flyway.baselineOnMigrate=true
flyway.baselineVersion=0

# Migration Settings
flyway.validateOnMigrate=true
flyway.cleanDisabled=true  # Prevent accidental data deletion
flyway.outOfOrder=false

# Placeholder Configuration
flyway.placeholderReplacement=true
flyway.placeholders.appUser=cm_app_user
flyway.placeholders.readonlyUser=cm_readonly

# Cloud Deployment Configurations
# =============================================================================

# AWS RDS Configuration (Production)
# flyway.url=jdbc:postgresql://${RDS_ENDPOINT}:5432/campus_marketplace
# flyway.user=${RDS_USERNAME}
# flyway.password=${RDS_PASSWORD}

# GCP Cloud SQL Configuration (Production)
# flyway.url=jdbc:postgresql://${CLOUDSQL_CONNECTION_NAME}/campus_marketplace
# flyway.user=${CLOUDSQL_USERNAME}
# flyway.password=${CLOUDSQL_PASSWORD}

# Azure Database Configuration (Production)
# flyway.url=jdbc:postgresql://${AZURE_DB_SERVER}:5432/campus_marketplace
# flyway.user=${AZURE_USERNAME}@${AZURE_DB_SERVER}
# flyway.password=${AZURE_PASSWORD}

# Multi-Environment Support
# =============================================================================
# Development:   flyway -configFiles=flyway-dev.conf migrate
# Staging:       flyway -configFiles=flyway-staging.conf migrate
# Production:    flyway -configFiles=flyway-prod.conf migrate

