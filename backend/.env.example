# Campus Marketplace Backend Environment Variables
# Copy this file to .env and update the values for your environment
#
# IMPORTANT: This file should be committed to git as a template
# The actual .env file should NEVER be committed (it's in .gitignore)

# =====================================================
# DATABASE CONFIGURATION
# =====================================================

# Database Connection Details
DB_HOST=localhost
DB_PORT=5432
DB_NAME=campus_marketplace

# Application Database User (Read/Write/Admin permissions)
DB_APP_USER=cm_app_user
DB_APP_PASSWORD=your_secure_password_here

# Root/Superuser Password (for database setup/migrations)
DB_ROOT_PASSWORD=your_root_password_here

# Read-only Database User (Analytics/Reporting - Optional)
DB_READONLY_USER=cm_readonly
DB_READONLY_PASSWORD=your_readonly_password_here

# =====================================================
# JWT CONFIGURATION
# =====================================================

# JWT Secret Key (MUST be at least 256 bits for HS512)
# Generate a secure key: openssl rand -base64 64
JWT_SECRET=myVerySecureSecretKeyForJWTTokensThatShouldBeAtLeast256BitsLongForHS256AlgorithmUpdated2024

# JWT Token Expiration (in milliseconds)
JWT_ACCESS_TOKEN_EXPIRATION=3600000    # 1 hour
JWT_REFRESH_TOKEN_EXPIRATION=604800000 # 7 days

# =====================================================
# APPLICATION CONFIGURATION
# =====================================================

# Spring Profile (dev, test, prod)
SPRING_PROFILES_ACTIVE=dev

# Server Port (optional, defaults to 8080)
PORT=8080

# =====================================================
# SSL CONFIGURATION
# =====================================================

# SSL Mode (disable for development, require for production)
SSL_MODE=disable
SSL_ENABLED=false
SSL_KEYSTORE_PATH=
SSL_KEYSTORE_PASSWORD=
SSL_KEYSTORE_TYPE=PKCS12

# SSL Certificate Paths (for PostgreSQL)
SSL_CERT_PATH=/etc/ssl/certs/server.crt
SSL_KEY_PATH=/etc/ssl/private/server.key

# =====================================================
# LOGGING CONFIGURATION
# =====================================================

# Log Levels (TRACE, DEBUG, INFO, WARN, ERROR)
LOG_LEVEL=INFO
SQL_LOG_LEVEL=WARN
SQL_BIND_LOG_LEVEL=WARN

# =====================================================
# PGADMIN CONFIGURATION (Optional)
# =====================================================

PGADMIN_EMAIL=admin@campusmarketplace.com
PGADMIN_PASSWORD=your_pgadmin_password

# =====================================================
# REDIS CONFIGURATION (Optional)
# =====================================================

REDIS_PASSWORD=your_redis_password

# =====================================================
# BACKUP CONFIGURATION (Optional)
# =====================================================

BACKUP_RETENTION_DAYS=7
REMOTE_BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=campus-marketplace-backups
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-west-2

# =====================================================
# MONITORING (Optional)
# =====================================================

ENABLE_MONITORING=true

# =====================================================
# SECURITY NOTES
# =====================================================

# 1. NEVER commit the actual .env file to version control
# 2. Use strong, unique passwords for all credentials
# 3. Generate a cryptographically secure JWT secret
# 4. Use different values for development, staging, and production
# 5. Consider using a secrets management service in production (AWS Secrets Manager, HashiCorp Vault, etc.)
# 6. Rotate credentials regularly in production
# 7. Use SSL/TLS in production (SSL_MODE=require)

# =====================================================
# DEVELOPMENT SETUP INSTRUCTIONS
# =====================================================

# 1. Copy this file to create your .env:
#    cp .env.example .env

# 2. Update the values in .env with your actual credentials

# 3. Create PostgreSQL database and user:
#    psql -U postgres (or your PostgreSQL superuser)
#    CREATE USER cm_app_user WITH PASSWORD 'your_password';
#    CREATE DATABASE campus_marketplace OWNER cm_app_user;
#    \c campus_marketplace
#    CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
#    GRANT ALL PRIVILEGES ON SCHEMA public TO cm_app_user;
#    GRANT ALL PRIVILEGES ON DATABASE campus_marketplace TO cm_app_user;
#    ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL ON TABLES TO cm_app_user;
#    ALTER DEFAULT PRIVILEGES IN SCHEMA public GRANT ALL ON SEQUENCES TO cm_app_user;

# 4. Load database schema:
#    psql -U cm_app_user -d campus_marketplace -f ../sql_files/schema_postgres.sql

# 5. Load seed data (optional):
#    psql -U cm_app_user -d campus_marketplace -f ../sql_files/seed_data.sql

# 6. Verify database setup:
#    psql -U cm_app_user -d campus_marketplace -f ../sql_files/verification_queries.sql

# 7. Start the application:
#    Development (H2 in-memory): ./mvnw spring-boot:run
#    Production (PostgreSQL):    ./mvnw spring-boot:run -Dspring-boot.run.profiles=prod
#    Or use the convenience script:  ./run-with-postgres.sh

# =====================================================
# DOCKER SETUP
# =====================================================

# When using Docker, ensure your .env file is in the backend directory
# Docker Compose will automatically load it into the container
# The spring-dotenv library will pick it up automatically

# =====================================================
# PROFILE-SPECIFIC NOTES
# =====================================================

# DEV Profile (default):
#   - Uses H2 in-memory database
#   - Auto-creates schema on startup
#   - SQL logging enabled
#   - No .env required

# TEST Profile:
#   - Uses H2 in-memory database
#   - Used for unit tests
#   - No .env required

# PROD Profile:
#   - Uses PostgreSQL database
#   - Requires .env file with DB credentials
#   - Schema validation only (no auto-creation)
#   - Use Flyway or manual migrations for schema changes
